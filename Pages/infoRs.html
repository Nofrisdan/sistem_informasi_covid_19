<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Informasi Covid-19</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="../assets/img/profil/logo.png" rel="icon">

    <link href="../assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../assets/vendor/icofont/icofont.min.css" rel="stylesheet">
    <link href="../assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="../assets/vendor/animate.css/animate.min.css" rel="stylesheet">
    <link href="../assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="../assets/vendor/venobox/venobox.css" rel="stylesheet">
    <link href="../assets/vendor/aos/aos.css" rel="stylesheet">

    <!-- Template Main CSS File -->
    <link href="../assets/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/mystyle.css">


    <!-- jquery -->
    <script src="../assets/js/jquery.js"></script>

</head>

<body>

    <!-- ======= Top Bar ======= -->
    <div id="topbar" class="d-none d-lg-flex align-items-center sticky-top">
        <div class="container d-flex align-items-center justify-content-between">
            <div class="d-flex align-items-center">
                <i class="icofont-clock-time"></i> Update Data - Saturday, 8AM to 10PM
            </div>
            <div class="d-flex align-items-center">
                <i class="icofont-email"></i> nofrisdansitopu22@gmail.com
            </div>
        </div>
    </div>

    <!-- ======= Header ======= -->
    <header id="header" class="sticky-top">
        <div class="container d-flex align-items-center">

            <a href="index.html" class="logo mr-auto"><img src="../assets/img/profil/logonobg.png" alt="" width="140px"
                    height="200px"></a>
            <!-- Uncomment below if you prefer to use an image logo -->
            <!-- <h1 class="logo mr-auto"><a href="index.html">Medicio</a></h1> -->

            <nav class="nav-menu d-none d-lg-block">
                <ul>
                    <li ><a href="../index.html">Utama</a></li>
                    <li><a href="#about">Tentang</a></li>
                    <li><a href="#services">Info Vaksin</a></li>
                    <li class="active"><a href="#">Info Rumah Sakit</a></li>

                    <li><a href="../index.html#doctors">Developer</a></li>

                    <li><a href="#contact">Contact</a></li>

                </ul>
            </nav><!-- .nav-menu -->

            <a href="#appointment" class="appointment-btn scrollto"><span class="d-none d-md-inline">Cek
                    Lokasi</span></a>

        </div>
    </header><!-- End Header -->


    <main id="main margin-40">
        <section class="search">

            <div class="row justify-content-center text-center">

                <h3 class="mb-3">Pilih Daerah Anda</h3>
            </div>

            <div class="row justify-content-center text-center">

                <div class="col-md-6">

                    <div class="input-group mb-1">
                        <select class="custom-select" id="pilih-daerah">
                            <option selected value="">Choose...</option>

                        </select>
                        <div class="input-group-append">
                            <label class="input-group-text" for="pilih-daerah"><i class="icofont-ui-search"></i></label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pilih-kab hidden">
            <div class="row justify-content-center text-center mt-5">

                <h3 class="mb-3">Pilih Kab / Kota Anda</h3>
            </div>

            <div class="row justify-content-center text-center">

                <div class="col-md-6">

                    <div class="input-group mb-1">
                        <select class="custom-select" disabled id="pilih-kab">
                           

                        </select>
                        <div class="input-group-append">
                            <label class="input-group-text" for="pilih-daerah"><i class="icofont-ui-search"></i></label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

            <div class="row justify-content-center text-center mt-5 content-cari hidden">

                <button class="btn btn-primary btn-cari">Cari Rumah Sakit</button>

            </div>


        </section>

        <div class="load text-center hidden">
            <img src="../assets/img/load2.gif">
        </div>


        <section id="featured-services" class="featured-services">
            <div class="container" data-aos="fade-up">

                <div class="row">
                    <h3 class="mb-2 rs-title"></h3>

                </div>

                <div class="row list-rs">
            
                    
                </div>

            </div>
        </section><!-- End Featured Services Section -->

    </main>

    <!-- ======= Footer ======= -->
    <footer id="footer">
        <div class="footer-top">
            <div class="container">
                <div class="row">

                    <div class="col-lg-6 col-md-6">
                        <div class="footer-info">
                            <h3>Nofrisdan Sitopu</h3>
                            <p>
                                Jl. Maguwo <br>
                                Banguntapan, Yogyakarta<br><br>
                                <strong>Email:</strong> nofrisdansitopu22@gmail.com<br>
                            </p>
                            <div class="social-links mt-3">
                                <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
                                <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
                                <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
                                <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
                                <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6 col-md-6 footer-links">
                        <h4>Useful Links</h4>
                        <ul>
                            <li><i class="bx bx-chevron-right"></i> <a href="#">Home</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a href="#">About us</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a href="#">Services</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a href="#">Terms of service</a></li>
                            <li><i class="bx bx-chevron-right"></i> <a href="#">Privacy policy</a></li>
                        </ul>
                    </div>

                </div>
            </div>
        </div>

        <div class="container">
            <div class="copyright">
                &copy; Copyright <strong><span>Nofrisdan Sitopu</span></strong>. All Rights Reserved
            </div>
            <div class="credits">
                Rest Api by <a href="https://github.com/farizdotid/DAFTAR-API-LOKAL-INDONESIA#buku"
                    target="__blank">Github
                    Farizdotid</a>
            </div>
        </div>
    </footer><!-- End Footer -->

    <div id="preloader"></div>
    <a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>

    <!-- Vendor JS Files -->
    <!-- <script src="../assets/vendor/jquery/jquery.min.js"></script> -->
    <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/vendor/jquery.easing/jquery.easing.min.js"></script>
    <script src="../assets/vendor/php-email-form/validate.js"></script>
    <script src="../assets/vendor/waypoints/jquery.waypoints.min.js"></script>
    <script src="../assets/vendor/counterup/counterup.min.js"></script>
    <script src="../assets/vendor/owl.carousel/owl.carousel.min.js"></script>
    <script src="../assets/vendor/venobox/venobox.min.js"></script>
    <script src="../assets/vendor/aos/aos.js"></script>

    <!-- Template Main JS File -->
    <script src="../assets/js/main.js"></script>

    <script>
        $("document").ready(function () {
            // ajax
            $.ajax({
                url: "https://rs-bed-covid-api.vercel.app/api/get-provinces",
                type: "GET",
                success: function (data) {
                    let result = JSON.parse(data);
                    const obj = result.provinces;

                    for (let i = 0; i < obj.length; i++) {
                        const elemen = `

                        <option value="`+ obj[i].id + `" class="select">` + obj[i].name + `</option>
                        `;

                        $("#pilih-daerah").append(elemen);
                    }

                }
            })

            $("#pilih-daerah").change(function(){
                $("#pilih-kab").attr("disabled","true");
                $("#pilih-kab").html("");
                let value = $(this).val();

                // ajax
                $.ajax({
                    url:"https://rs-bed-covid-api.vercel.app/api/get-cities",
                    type:"GET",
                    data:{
                        "provinceid":value
                    },
                    complete:function(){
                        $("#pilih-kab").removeAttr("disabled");
                        $(".pilih-kab").toggleClass("hidden");
                    },
                    success:function(data){
                        const obj = JSON.parse(data);
                        const result = obj.cities;
                        
                        for(let i=0; i < result.length; i++){
                            const elemen = `

                                <option value="`+ result[i].id + `" class="select">` + result[i].name + `</option>
                                `; 


                            $("#pilih-kab").append(elemen);

                        }

                    $(".content-cari").removeClass("hidden");

                    }
                })
            })

            $(".btn-cari").on("click",function(){

                $(".list-rs").html(" ");
                let kd_daerah = $("#pilih-daerah").val();
                let kd_kab = $("#pilih-kab").val();

                // ajax
                $.ajax({
                    url:"https://rs-bed-covid-api.vercel.app/api/get-hospitals",
                    type:"GET",
                    dataType:"json",
                    data:{
                        "provinceid":kd_daerah,
                        "cityid":kd_kab,
                        "type":"1"
                    },
                    beforeSend:function(){
                        $(".load").toggleClass("hidden");
                    },
                    complete:function(){
                        $(".load").toggleClass("hidden");
                        $(".rs-title").html("Rumah Sakit Rujukan Covid");
                        $(".content-cari").addClass("hidden");
                        $(".pilih-kab").toggleClass("hidden");
                    },
                    success:function(data){

                        console.log(data);

                        const rs = data.hospitals;

                        for(let i = 0; i<rs.length;i++){
                            let element = `
                        
                                    <div class="col-md-6 col-lg-3 d-flex align-items-stretch mb-5 mb-lg-0" id="btn-info-rs">
                                    <div class="icon-box mb-3" data-aos="fade-up" data-aos-delay="200">
                                        <div class="icon"><i class="icofont-hospital"></i></div>
                                        <h4 class="title"><a href="#">`+rs[i].name+`</a></h4>
                                        <p class="description">`+rs[i].address+`</p>
                                        <h4 class="title">Kode </h4> `+rs[i].id+`
                                        <h4 class="title">Call </h4> `+rs[i].phone+`
                                        <h4 class="title">Ruangan Kosong </h4> `+rs[i].bed_availability+`
                                        <h4 class="title">Update </h4> `+rs[i].info+`
                                        
                                    </div>
                                </div>

                        `;


                            $(".list-rs").append(element);
                        }
                       
                    }
                })

            })
        

            $(".icon").click(function(){
                alert("active");
            })
        })


    </script>
</body>

</html>